import{b as e,r as s,j as t,N as a,F as l,e as x,f as r,g as c,h as d}from"./index-8fe229f6.js";const i=()=>{const{isLoading:i}=e(),[n,m]=s.useState(null),[h,o]=s.useState(!0);return s.useEffect((()=>{(async()=>{try{const e=await fetch("/api/admin/stats"),s=await e.json();s.success&&m(s.data)}catch(e){}finally{o(!1)}})()}),[]),i||h?t.jsx("div",{className:"flex items-center justify-center min-h-screen bg-white",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-xl border-4 border-solid border-primary border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"}),t.jsx("p",{className:"mt-4 text-muted",children:"جاري تحميل البيانات..."})]})}):n?t.jsxs("div",{className:"min-h-screen bg-white",children:[t.jsx(a,{}),t.jsxs("div",{className:"container mx-auto px-4 py-8",children:[t.jsx("h1",{className:"text-2xl font-bold text-text mb-8",children:"لوحة التحكم"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[t.jsx("div",{className:"bg-white rounded-xl shadow-xl p-6",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center",children:t.jsx(l,{className:"text-2xl text-primary"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-muted text-sm",children:"إجمالي المستخدمين"}),t.jsx("p",{className:"text-2xl font-bold text-text",children:n.counts.users})]})]})}),t.jsx("div",{className:"bg-white rounded-xl shadow-xl p-6",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-secondary/10 flex items-center justify-center",children:t.jsx(x,{className:"text-2xl text-secondary"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-muted text-sm",children:"الاختبارات"}),t.jsx("p",{className:"text-2xl font-bold text-text",children:n.counts.exams})]})]})}),t.jsx("div",{className:"bg-white rounded-xl shadow-xl p-6",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-12 h-12 rounded-xl bg-accent/10 flex items-center justify-center",children:t.jsx(r,{className:"text-2xl text-accent"})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-muted text-sm",children:"التسجيلات"}),t.jsx("p",{className:"text-2xl font-bold text-text",children:n.counts.submissions})]})]})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[t.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-text mb-4",children:"معدل الإكمال"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-16 h-16 rounded-xl bg-success/10 flex items-center justify-center",children:t.jsx(c,{className:"text-3xl text-success"})}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-3xl font-bold text-success",children:[n.performance.completionRate,"%"]}),t.jsx("p",{className:"text-muted text-sm",children:"نسبة إكمال الاختبارات"})]})]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-text mb-4",children:"متوسط الدرجات"}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx("div",{className:"w-16 h-16 rounded-xl bg-primary/10 flex items-center justify-center",children:t.jsx(d,{className:"text-3xl text-primary"})}),t.jsxs("div",{children:[t.jsxs("p",{className:"text-3xl font-bold text-primary",children:[n.performance.averageScore,"%"]}),t.jsx("p",{className:"text-muted text-sm",children:"متوسط درجات المستخدمين"})]})]})]})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 mb-8",children:[t.jsx("h2",{className:"text-lg font-semibold text-text mb-4",children:"أفضل الاختبارات"}),t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"w-full",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-border",children:[t.jsx("th",{className:"text-right py-3 px-4 text-muted font-medium",children:"الاختبار"}),t.jsx("th",{className:"text-right py-3 px-4 text-muted font-medium",children:"عدد التسجيلات"}),t.jsx("th",{className:"text-right py-3 px-4 text-muted font-medium",children:"متوسط الدرجات"})]})}),t.jsx("tbody",{children:n.topExams.map(((e,s)=>t.jsxs("tr",{className:"border-b border-border hover:bg-primary/5",children:[t.jsx("td",{className:"py-3 px-4 text-text",children:e.name}),t.jsx("td",{className:"py-3 px-4 text-text",children:e.submissions}),t.jsx("td",{className:"py-3 px-4",children:t.jsxs("span",{className:"px-2 py-1 rounded-full text-sm "+(e.averageScore>=70?"bg-success/10 text-success":e.averageScore>=50?"bg-warning/10 text-warning":"bg-error/10 text-error"),children:[e.averageScore,"%"]})})]},s)))})]})})]}),t.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-text mb-4",children:"توزيع الأعمار"}),t.jsx("div",{className:"grid grid-cols-5 gap-4",children:n.ageDistribution.labels.map(((e,s)=>t.jsx("div",{className:"text-center",children:t.jsxs("div",{className:"bg-primary/5 rounded-xl p-4",children:[t.jsx("p",{className:"text-2xl font-bold text-primary",children:n.ageDistribution.data[s]}),t.jsx("p",{className:"text-muted text-sm mt-1",children:e})]})},s)))})]})]})]}):t.jsxs("div",{className:"min-h-screen bg-white",children:[t.jsx(a,{}),t.jsx("div",{className:"container mx-auto px-4 py-8",children:t.jsx("div",{className:"text-center text-error",children:"حدث خطأ في تحميل البيانات"})})]})};export{i as default};
